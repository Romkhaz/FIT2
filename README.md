# Fit-GPX Bot

Telegramâ€‘Ð±Ð¾Ñ‚ Ð´Ð»Ñ ÑÐ»Ð¸ÑÐ½Ð¸Ñ GPSâ€‘Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· FITâ€‘Ñ„Ð°Ð¹Ð»Ð¾Ð² Garmin Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¼ Ñ‚Ñ€ÐµÐºÐ¾Ð¼ Ð¸Ð· GPX. Ð‘Ð¾Ñ‚ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð²Ð° Ñ„Ð°Ð¹Ð»Ð° (FIT + GPX), Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÐµÑ‚ Ð¸Ñ…, ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ (Ð²Ñ€ÐµÐ¼Ñ, ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ, Ð¿ÑƒÐ»ÑŒÑ, ÐºÐ°Ð´ÐµÐ½Ñ, Ð²Ñ‹ÑÐ¾Ñ‚Ñƒ) Ð¸ Ð²Ñ‹Ð´Ð°Ñ‘Ñ‚ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ GPX Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð³ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸ÐµÐ¹ Ð¸ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒÑŽ.

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```text
project-root/
â”œâ”€â”€ bot.py                   # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð´ Telegramâ€‘Ð±Ð¾Ñ‚Ð°
â”œâ”€â”€ merge_fit_gpx.py         # ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ merge(fit_path, gpx_path, output_path)
â”œâ”€â”€ requirements.txt         # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
â”œâ”€â”€ Dockerfile               # ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Dockerâ€‘Ð¾Ð±Ñ€Ð°Ð·Ð°
â”œâ”€â”€ docker-compose.yml       # (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾) Ð´Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ñ
â”œâ”€â”€ .env                     # ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (TELEGRAM_TOKEN)
â””â”€â”€ README.md                # Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
```

---

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```bash
git clone https://github.com/your-username/fit-gpx-bot.git
cd fit-gpx-bot
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð² ÐºÐ¾Ñ€Ð½Ðµ Ñ„Ð°Ð¹Ð»Ð° `.env`:

```ini
TELEGRAM_TOKEN=Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½_Ð¾Ñ‚_BotFather
```

### 3. Ð—Ð°Ð¿ÑƒÑÐº Ð±ÐµÐ· Docker

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
pip install --no-cache-dir -r requirements.txt

# Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð° (long-polling)
python bot.py
```

---

## ðŸ³ Ð—Ð°Ð¿ÑƒÑÐº Ð² Docker

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¾Ð±Ñ€Ð°Ð·Ð°

```bash
docker build -t fit-gpx-bot .
```

### Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°

```bash
docker run -d \
  --name fitbot \
  --env-file .env \
  --restart unless-stopped \
  fit-gpx-bot
```

### ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²

```bash
docker logs -f fitbot
```

---

## âš™ï¸ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

1. Ð’ Telegram Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð±Ð¾Ñ‚Ñƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ `/start`.
2. ÐŸÑ€Ð¸ÑˆÐ»Ð¸Ñ‚Ðµ FITâ€‘Ñ„Ð°Ð¹Ð» Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ¸.
3. ÐŸÑ€Ð¸ÑˆÐ»Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ GPXâ€‘Ñ‚Ñ€ÐµÐº.
4. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½Ñ‘Ð½Ð½Ñ‹Ð¹ GPXâ€‘Ñ„Ð°Ð¹Ð» Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ñ‚Ñ€Ð°ÐµÐºÑ‚Ð¾Ñ€Ð¸ÐµÐ¹, Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ°Ð¼Ð¸ Ð¸ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒÑŽ.

---

## ðŸ“¦ Docker Compose (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

```yaml
version: "3.8"
services:
  fitbot:
    build: .
    restart: unless-stopped
    env_file:
      - .env
```

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ:

```bash
docker-compose up -d
```

---

## ðŸ“‹ Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

* Python 3.9+
* Docker (Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸)
* ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ `TELEGRAM_TOKEN`

### Pythonâ€‘Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

```text
fitparse>=1.1.5
python-telegram-bot>=13.14,<14.0
```

---

## ðŸ”§ Ð”ÐµÑ‚Ð°Ð»Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

* **merge\_fit\_gpx.py** â€” Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°ÐµÑ‚ FIT-Ñ„Ð°Ð¹Ð» (fitparse), Ð¿Ð°Ñ€ÑÐ¸Ñ‚ GPX (xml.etree), Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ ÐºÑƒÐ¼ÑƒÐ»ÑÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð´Ð¸ÑÑ‚Ð°Ð½Ñ†Ð¸Ð¸ (Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð³Ð°Ð²ÐµÑ€ÑÐ¸Ð½ÑƒÑÐ¾Ð²), Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð¿Ð¾Ñ€Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð¸ÑÑ‚Ð°Ð½Ñ†Ð¸Ð¸, Ð²ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· Garmin TrackPointExtension.
* **bot.py** â€” Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· `python-telegram-bot`: ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ñ„Ð°Ð¹Ð»Ñ‹ Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ, Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ merge, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ñ‚Ð¾Ð³.

---

## ðŸ“ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

MIT Â© Ð’Ð°ÑˆÐµ Ð˜Ð¼Ñ
